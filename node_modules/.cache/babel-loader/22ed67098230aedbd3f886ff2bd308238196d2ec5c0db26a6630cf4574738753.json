{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { Api } from \"../ApiData/Api\";\nexport const getAllBooks = createAsyncThunk(\"books/getAllBooks\", async () => {\n  const {\n    baseUrl,\n    headers\n  } = Api();\n  const books = await fetch(`${baseUrl}/books`, {\n    headers\n  }).then(res => res.json()).then(data => data.books);\n  return books;\n});\nexport const getBook = createAsyncThunk(\"books/getBook\", async _ref => {\n  let {\n    bookId\n  } = _ref;\n  const {\n    baseUrl,\n    headers\n  } = Api();\n  const book = await fetch(`${baseUrl}/books/${bookId}`, {\n    headers\n  }).then(res => res.json()).then(data => data.book);\n  return book;\n});\nexport const editShelf = createAsyncThunk(\"books/editShelf\", async _ref2 => {\n  let {\n    bookId,\n    category\n  } = _ref2;\n  const {\n    baseUrl,\n    headers\n  } = Api();\n  console.log(category);\n  const books = await fetch(`${baseUrl}/books/${bookId}`, {\n    method: \"PUT\",\n    headers: {\n      ...headers,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      shelf: category\n    })\n  }).then(res => res.json());\n  return books;\n});\nexport const searchBook = createAsyncThunk(\"books/searchBook\", async _ref3 => {\n  let {\n    query\n  } = _ref3;\n  const {\n    baseUrl,\n    headers\n  } = Api();\n  const searchResult = await fetch(`${baseUrl}/search`, {\n    method: \"POST\",\n    headers: {\n      ...headers,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      query,\n      maxResults: 10\n    })\n  }).then(res => res.json()).then(data => data.books);\n  return searchResult;\n});\nconst bookSlice = createSlice({\n  name: \"books\",\n  initialState: {\n    books: [],\n    book: {},\n    searchResultBooks: []\n  },\n  reducers: {\n    changeCategory: (state, action) => {\n      state.books = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(getAllBooks.pending, (state, action) => {\n      console.log(\"Fetching Data...\");\n    });\n    builder.addCase(getAllBooks.fulfilled, (state, action) => {\n      console.log(state);\n      state.books = action.payload;\n    });\n    builder.addCase(editShelf.pending, (state, action) => {\n      console.log(\"editing Book category...\");\n    });\n    builder.addCase(editShelf.fulfilled, (state, action) => {\n      console.log(action.payload);\n    });\n    builder.addCase(getBook.pending, (state, action) => {\n      console.log(\"fetching Book ...\");\n    });\n    builder.addCase(getBook.fulfilled, (state, action) => {\n      state.book = action.payload;\n    });\n    builder.addCase(searchBook.pending, (state, action) => {\n      console.log(\"searching books...\");\n    });\n    builder.addCase(searchBook.fulfilled, (state, action) => {\n      console.log(action.payload);\n      state.searchResultBooks = action.payload;\n    });\n  }\n});\nexport const {\n  changeCategory\n} = bookSlice.actions;\nexport default bookSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","Api","getAllBooks","baseUrl","headers","books","fetch","then","res","json","data","getBook","bookId","book","editShelf","category","console","log","method","body","JSON","stringify","shelf","searchBook","query","searchResult","maxResults","bookSlice","name","initialState","searchResultBooks","reducers","changeCategory","state","action","payload","extraReducers","builder","addCase","pending","fulfilled","actions","reducer"],"sources":["C:/Users/esooe/Downloads/esra react/My-Reads-main/src/store/booksSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Api } from \"../ApiData/Api\";\nimport { BookData } from \"../models/BookModel\";\n\nexport const getAllBooks = createAsyncThunk<BookData[], void>(\"books/getAllBooks\", async () => {\n    const { baseUrl, headers } = Api();\n\n    const books = await fetch(`${baseUrl}/books`, { headers })\n        .then((res) => res.json())\n        .then((data) => data.books);\n    return books\n});\n\nexport const getBook = createAsyncThunk<BookData, any>(\"books/getBook\", async ({ bookId }) => {\n    const { baseUrl, headers } = Api();\n\n    const book = await fetch(`${baseUrl}/books/${bookId}`, { headers })\n        .then((res) => res.json())\n        .then((data) => data.book);\n    return book\n});\n\nexport const editShelf = createAsyncThunk<any, any>(\"books/editShelf\", async ({ bookId, category }) => {\n    const { baseUrl, headers } = Api();\n\n    console.log(category)\n    const books = await fetch(`${baseUrl}/books/${bookId}`, {\n        method: \"PUT\",\n        headers: {\n            ...headers,\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ shelf: category }),\n    }).then((res) => res.json());\n    return books\n});\n\nexport const searchBook = createAsyncThunk<BookData[], any>(\"books/searchBook\", async ({ query }) => {\n    const { baseUrl, headers } = Api();\n    const searchResult = await fetch(`${baseUrl}/search`, {\n        method: \"POST\",\n        headers: {\n            ...headers,\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ query, maxResults: 10 }),\n    })\n        .then((res) => res.json())\n        .then((data) => data.books);\n    return searchResult;\n});\n\nconst bookSlice = createSlice({\n    name: \"books\",\n    initialState: {\n        books: [] as BookData[],\n        book: {} as BookData,\n        searchResultBooks: [] as BookData[]\n    },\n    reducers: {\n        changeCategory: (state, action) => {\n            state.books = action.payload\n        }\n    },\n    extraReducers: (builder) => {\n        builder.addCase(getAllBooks.pending, (state, action) => {\n            console.log(\"Fetching Data...\");\n        })\n        builder.addCase(getAllBooks.fulfilled, (state, action) => {\n            console.log(state);\n            state.books = action.payload\n        })\n        builder.addCase(editShelf.pending, (state, action) => {\n            console.log(\"editing Book category...\");\n        })\n        builder.addCase(editShelf.fulfilled, (state, action) => {\n            console.log(action.payload)\n        })\n        builder.addCase(getBook.pending, (state, action) => {\n            console.log(\"fetching Book ...\");\n        })\n        builder.addCase(getBook.fulfilled, (state, action: PayloadAction<BookData>) => {\n            state.book = action.payload as BookData\n        })\n        builder.addCase(searchBook.pending, (state, action) => {\n            console.log(\"searching books...\");\n        })\n        builder.addCase(searchBook.fulfilled, (state, action) => {\n            console.log(action.payload)\n            state.searchResultBooks = action.payload\n        })\n    }\n})\n\nexport const { changeCategory } = bookSlice.actions;\nexport default bookSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}